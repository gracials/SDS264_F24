<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>mini_project_4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="mini_project_4_files/libs/clipboard/clipboard.min.js"></script>
<script src="mini_project_4_files/libs/quarto-html/quarto.js"></script>
<script src="mini_project_4_files/libs/quarto-html/popper.min.js"></script>
<script src="mini_project_4_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="mini_project_4_files/libs/quarto-html/anchor.min.js"></script>
<link href="mini_project_4_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="mini_project_4_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="mini_project_4_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="mini_project_4_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="mini_project_4_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="mini_project_4_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="mini_project_4_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="mini_project_4_files/libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet">
<script src="mini_project_4_files/libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
<script src="mini_project_4_files/libs/wordcloud2-0.0.1/hover.js"></script>
<script src="mini_project_4_files/libs/wordcloud2-binding-0.2.1/wordcloud2.js"></script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">mini_project_4</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>How does the form and style of different holy books differ?</p>
<p>This page seeks to answer this question through an analysis of the textual similarities and differences between the Quran and the KJV Bible. While one can engage–and certainly many have—in comparative <em>literary</em> analyses between these two texts, tracking key style patterns through textual quantifications and visualization opens up possibilities for new and different insights.</p>
<p>The Holy Quran is the central holy text of Islam, while the Bible is the central holy text Christianity. The Quran was originally written in Arabic and the Bible in Hebrew (Old Testament) and Greek (New Testament). A small portion of the Old Testament was written in Biblical Aramaic. As such, it is worth noting that any textual analysis of these texts is a textual analysis of translations, wherein notes on form and style are notes on both the heart of the text and the given translation.</p>
<p>The Quran and the Bible have a lot in common, including shared stories and moral teachings, and assertion of a monotheistic god. They also have some clear differences: the Quran is much shorter at 6,236 ayahs (verses) while the King James Version of the Bible has 31,102 verses; the Quran is believed to have been revealed and recorded within a short frame of time, while the writing of the Bible occurred across centuries by many different authors;and the Quran is more lyrical and repetitious, while the Bible places more emphasis on storytelling. These differences represent but a sample of the ways in which these two texts can and have been contrasted. In my text analysis, I seek to identify other ways of comparing these two holy books, first with an an ayah/verse-level analysis and through word-level analysis.</p>
<p>Data sources: <a href="https://www.kaggle.com/datasets/imrankhan197/the-quran-dataset">The Quran Dataset on Kaggle</a> and <a href="https://www.kaggle.com/datasets/oswinrh/bible?select=t_kjv.csv">Bible Corpus on Kaggle</a></p>
</section>
<section id="special-symbols" class="level2">
<h2 class="anchored" data-anchor-id="special-symbols">Special Symbols</h2>
<p>In the text of the Quran, these symbols appear semi-regularly: ˹ ˺. They do not appear in the KJV Bible.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Holy Books</th>
<th style="text-align: right;">Symbol Count</th>
<th style="text-align: right;">Total</th>
<th style="text-align: right;">Proportion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">King James Version Bible</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">31103</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">The Holy Quran</td>
<td style="text-align: right;">3291</td>
<td style="text-align: right;">6236</td>
<td style="text-align: right;">0.5277421</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>In fact, over half of the ayahs in the Quran include this symbol. We can take a closer look at what kinds of phrases are bracketed in by these symbols:</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 84%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Surah Number</th>
<th style="text-align: right;">Ayah Number</th>
<th style="text-align: left;">Ayah Text</th>
<th style="text-align: left;">Symbol Text</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">You ˹alone˺ we worship and You ˹alone˺ we ask for help.</td>
<td style="text-align: left;">˹alone˺</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">and who believe in what has been revealed to you ˹O Prophet˺ and what was revealed before you, and have sure faith in the Hereafter.</td>
<td style="text-align: left;">˹O Prophet˺</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">It is they who are ˹truly˺ guided by their Lord, and it is they who will be successful.</td>
<td style="text-align: left;">˹truly˺</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">And there are some who say, “We believe in Allah and the Last Day,” yet they are not ˹true˺ believers.</td>
<td style="text-align: left;">˹true˺</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">There is sickness in their hearts, and Allah ˹only˺ lets their sickness increase. They will suffer a painful punishment for their lies.</td>
<td style="text-align: left;">˹only˺</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">16</td>
<td style="text-align: left;">They are the ones who trade guidance for misguidance. But this trade is profitless, and they are not ˹rightly˺ guided.</td>
<td style="text-align: left;">˹rightly˺</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">18</td>
<td style="text-align: left;">They are ˹wilfully˺ deaf, dumb, and blind, so they will never return ˹to the Right Path˺.</td>
<td style="text-align: left;">˹wilfully˺</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">19</td>
<td style="text-align: left;">Or ˹those caught in˺ a rainstorm from the sky with darkness, thunder, and lightning. They press their fingers into their ears at the sound of every thunder-clap for fear of death. And Allah encompasses the disbelievers ˹by His might˺.</td>
<td style="text-align: left;">˹those caught in˺</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">21</td>
<td style="text-align: left;">O humanity! Worship your Lord, Who created you and those before you, so that you may become mindful ˹of Him˺.</td>
<td style="text-align: left;">˹of Him˺</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">22</td>
<td style="text-align: left;">˹He is the One˺ Who has made the earth a place of settlement for you and the sky a canopy; and sends down rain from the sky, causing fruits to grow as a provision for you. So do not knowingly set up equals to Allah ˹in worship˺.</td>
<td style="text-align: left;">˹He is the One˺</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>It is unclear to me exactly what this symbol is intended to indicate as these symbols do not appear in the original Arabic of the Quran or in typical English translations. Generally, they seem to perhaps correlate with instances in which those words contained in the brackets might be emphasized.</p>
<p>Given that this symbol does not appear in most translations of the Quran, it is not necessarily a crucial point of analysis in comparing and contrasting the Quran with the KJV Bible. It does, however, raise an important point about symbols. In the original writings of the Quran and in many translations, the text contains symbols which indicate_________. This is a major difference between the Quran and the Bible, as the Bible does not contain these types of symbols.</p>
</section>
<section id="dialogue" class="level2">
<h2 class="anchored" data-anchor-id="dialogue">Dialogue</h2>
<p>How often does dialogue appear in these two Holy Books? We can first asses this through counts and proportions of instances in which quotation marks (” “) appear.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Title</th>
<th style="text-align: right;">Quotation Count</th>
<th style="text-align: right;">Total</th>
<th style="text-align: right;">Proportion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">King James Version Bible</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">31103</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">The Holy Quran</td>
<td style="text-align: right;">1159</td>
<td style="text-align: right;">6236</td>
<td style="text-align: right;">0.1858563</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Interestingly, the KJV Bible does not use any quotation marks, while nearly a fifth of the verses in the Quran contain quotations.</p>
<p>It is worth noting that many modern translations of the Bible do include quotation marks. The original text of the Bible did not use quotations nor did the original Arabic of the Quran.</p>
<p>In modern, English translations, however, it is fairly common to include quotation marks as means to indicate speech and dialogue.</p>
<p>In order to include instances of potential dialogue in the KJV Bible, we will also add in our count instances in which the words “said,” “says,” “tells,” “told,” “asks,” or “asked” are used. Certainly there are other words which indicate dialogue and likely there are instances in which these words are connect to phrases which aren’t dialogue, however, using these words in addition to quotation marks gives us a rough estimate of the use of dialogic phrases.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Title</th>
<th style="text-align: right;">Dialogue Count</th>
<th style="text-align: right;">Total</th>
<th style="text-align: right;">Proportion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">King James Version Bible</td>
<td style="text-align: right;">3903</td>
<td style="text-align: right;">31103</td>
<td style="text-align: right;">0.1254863</td>
</tr>
<tr class="even">
<td style="text-align: left;">The Holy Quran</td>
<td style="text-align: right;">1276</td>
<td style="text-align: right;">6236</td>
<td style="text-align: right;">0.2046183</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Once words associated with dialogue are included in the count, we can see that about an 8th of the verses in the Bible contain dialogic phrases while a little over a 5th of the ayahs in the Quran contain do. <em>Why does the Quran have more dialogue than the KJV Bible?</em></p>
</section>
<section id="the-divine" class="level2">
<h2 class="anchored" data-anchor-id="the-divine">The Divine</h2>
<p>How do the two books compare when it comes to references to the Divine? In the Quran, the Divine is most often referred to as “Allah,” which is Arabic for “God.” In this translation of the Quran, Allah/God is also referred to as “Lord,” “God,” and “Almighty.” In the KJV Bible, the Divine is referred to as “God,” “LORD,” “Lord,” and “Almighty.” Because God is triune in the Bible (God, Jesus, and Holy Spirit), “Christ,” “Jesus,” and the “Holy Spirit” can also be considered references to the Divine in the KJV Bible. The Christ/Jesus figure appears in The Quran as a prophet, but the Quranic Christ/Jesus is not Divine.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 28%">
<col style="width: 52%">
<col style="width: 6%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Title</th>
<th style="text-align: right;">Divine Count without Jesus/Christ/Holy Spirit</th>
<th style="text-align: right;">Total</th>
<th style="text-align: right;">Proportion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">King James Version Bible</td>
<td style="text-align: right;">8858</td>
<td style="text-align: right;">31103</td>
<td style="text-align: right;">0.2847957</td>
</tr>
<tr class="even">
<td style="text-align: left;">The Holy Quran</td>
<td style="text-align: right;">2681</td>
<td style="text-align: right;">6236</td>
<td style="text-align: right;">0.4299230</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 27%">
<col style="width: 53%">
<col style="width: 6%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Title</th>
<th style="text-align: right;">Divine Count including Jesus/Christ/Holy Spirit</th>
<th style="text-align: right;">Total</th>
<th style="text-align: right;">Proportion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">King James Version Bible</td>
<td style="text-align: right;">9681</td>
<td style="text-align: right;">31103</td>
<td style="text-align: right;">0.3112561</td>
</tr>
<tr class="even">
<td style="text-align: left;">The Holy Quran</td>
<td style="text-align: right;">2694</td>
<td style="text-align: right;">6236</td>
<td style="text-align: right;">0.4320077</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The Divine is referred to in approximately 43% of ayahs in the Quran and about 31% of the verses in the KJV Bible once the triune God is taken into account. These percentages aren’t drastically different, but nevertheless, it is clear that the Quran includes more verses with direct reference to God. <em>WHY</em></p>
</section>
<section id="most-common-words" class="level2">
<h2 class="anchored" data-anchor-id="most-common-words">Most common words</h2>
<p>Wordclouds of the most common words in the Quran and in the Bible indicate that</p>
<div class="cell">
<div class="cell-output-display">
<div class="wordcloud2 html-widget html-fill-item" id="htmlwidget-2f452a48a20a4b8e7805" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-2f452a48a20a4b8e7805">{"x":{"word":["allah","lord","people","prophet","surely","day","believers","earth","allah’s","punishment","disbelievers","messenger","truth","worship","reward","heavens","evil","life","moses","revealed","signs","mindful","true","fear","faith","created","remember","fire","mercy","hearts","judgment","torment","knowledge","land","wills","quran","messengers","book","merciful","god","revelations","angels","wrongdoers","children","follow","bring","hell","knowing","deeds","night","deny","forgiving","guide","women","guided","prayer","gods","replied","servants","wise","return","call","almighty","world","wealth","death","seek","sign","time","news","lord’s","abraham","gardens","pharaoh","associate","humanity","set","witness","righteous","disbelieve"],"freq":[2600,900,704,586,561,474,383,347,288,267,258,237,233,223,220,216,199,177,176,171,169,168,167,158,156,155,155,154,151,149,149,149,148,137,137,136,131,126,126,120,119,118,117,113,110,109,109,109,100,99,98,96,96,95,94,93,92,92,92,92,91,89,88,87,86,84,82,81,81,79,78,77,77,77,74,74,74,73,72,71],"fontFamily":"Segoe UI","fontWeight":"bold","color":["#FBB4AE","#B3CDE3","#CCEBC5","#DECBE4","#FED9A6","#FFFFCC","#E5D8BD","#FDDAEC","#F2F2F2"],"minSize":1,"weightFactor":0.06923076923076923,"backgroundColor":"white","gridSize":0,"minRotation":-0.7853981633974483,"maxRotation":0.7853981633974483,"shuffle":true,"rotateRatio":0.4,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="wordcloud2 html-widget html-fill-item" id="htmlwidget-a9ac9b148e20dbb091e9" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-a9ac9b148e20dbb091e9">{"x":{"word":["lord","thou","thy","god","ye","thee","israel","son","hath","king","people","house","children","day","land","shalt","hand","behold","saith","sons","hast","david","earth","jesus","father","thine","thereof","city","days","brought","moses","heart","pass","judah","jerusalem","bring","offering","word","set","eat","mine","heard","called","time","evil","egypt","holy","hundred","spake","heaven"],"freq":[7830,5474,4600,4446,3982,3827,2565,2370,2264,2256,2139,2024,1803,1734,1718,1616,1466,1326,1262,1094,1070,1011,987,983,979,938,906,868,868,863,847,830,830,812,811,725,724,697,695,655,649,641,625,623,613,611,611,590,587,582],"fontFamily":"Segoe UI","fontWeight":"bold","color":["#FBB4AE","#B3CDE3","#CCEBC5","#DECBE4","#FED9A6","#FFFFCC","#E5D8BD","#FDDAEC","#F2F2F2"],"minSize":1,"weightFactor":0.02298850574712644,"backgroundColor":"white","gridSize":0,"minRotation":-0.7853981633974483,"maxRotation":0.7853981633974483,"shuffle":true,"rotateRatio":0.4,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="mini_project_4_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="positive-vs.-negative-sentiment-analysis" class="level2">
<h2 class="anchored" data-anchor-id="positive-vs.-negative-sentiment-analysis">Positive vs.&nbsp;Negative Sentiment Analysis</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,786 × 2
   word        sentiment
   &lt;chr&gt;       &lt;chr&gt;    
 1 2-faces     negative 
 2 abnormal    negative 
 3 abolish     negative 
 4 abominable  negative 
 5 abominably  negative 
 6 abominate   negative 
 7 abomination negative 
 8 abort       negative 
 9 aborted     negative 
10 aborts      negative 
# ℹ 6,776 more rows</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(word)`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in inner_join(holy_books_words, bing_sentiments): Detected an unexpected many-to-many relationship between `x` and `y`.
ℹ Row 538884 of `x` matches multiple rows in `y`.
ℹ Row 929 of `y` matches multiple rows in `x`.
ℹ If a many-to-many relationship is expected, set `relationship =
  "many-to-many"` to silence this warning.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="mini_project_4_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>